function Rectangle(e,t){var a=Number(e),i=Number(t);function s(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}this.area=function(){return s(a*i,2)},this.perimeter=function(){return s(2*(a+i),2)}}function validate(e){var t={isOK:!1,reason:""};return""===e?t.reason="不能为空！":/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-]?\d+)?$/.test(e)?Number(e)<0?t.reason="必须大于零":t.isOK=!0:t.reason="必须是数值",t}function isLegalKey(e,t,a){if(/[abcdf-zABCDF-Z`~!@#$%^&*()\-=_+[\]{}|;:'",<>/?\\]/.test(e))return!1;if("."===e){if(0===a||-1!==t.indexOf("."))return!1;if(1===a&&"-"===t.substring(0,1))return!1}if("e"===e){if(0===a||-1!==t.indexOf("e")||-1!==t.indexOf("E"))return!1;if(1===a&&"-"===t.substring(0,1))return!1}if("E"===e){if(0===a||-1!==t.indexOf("e")||-1!==t.indexOf("E"))return!1;if(1===a&&"-"===t.substring(0,1))return!1}return!0}$(function(){var t=$("#width"),a=$("#height"),e=$("#calculate"),i=$("#perimeter"),s=$("#area");$widthValidate=$("#width-validate"),$heightValidate=$("#height-validate"),isPassValidate1=!1,isPassValidate2=!1,$forkMeGH.show("https://github.com/fym1/rectangle"),$bszPageFooter.show("body"),t.focusout(function(){var e=validate(t.val());isPassValidate1=e.isOK,console.log(isPassValidate1),console.log(isPassValidate2),e.isOK?$widthValidate.html(""):($widthValidate.html("宽度"+e.reason),t.select())}),t.keypress(function(e){isLegalKey(e.key,e.target.value,e.target.selectionStart)||e.preventDefault()}),a.keypress(function(e){isLegalKey(e.key,e.target.value,e.target.selectionStart)||e.preventDefault()}),a.focusout(function(){var e=validate(a.val());isPassValidate2=e.isOK,console.log(isPassValidate2),e.isOK?$heightValidate.html(""):($heightValidate.html("高度"+e.reason),a.select())}),e.click(function(){if(isPassValidate1&&isPassValidate2){var e=new Rectangle(t.val(),a.val());i.val(e.perimeter()),s.val(e.area())}})});